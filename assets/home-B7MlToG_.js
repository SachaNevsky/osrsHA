import{w as I,a as c,p as e,R}from"./chunk-WWGJGFF6-DaTaPSdi.js";const E=()=>{const[g,p]=c.useState([]),[f,b]=c.useState(!1),[y,j]=c.useState(""),[i,k]=c.useState({key:"profit",direction:"desc"}),[x,v]=c.useState(!0),[N,C]=c.useState(85),[d,S]=c.useState(null);if(c.useEffect(()=>{fetch("/osrsHA/items.json").then(t=>t.json()).then(t=>S(t))},[]),!d)return e.jsx("div",{children:"Loading..."});const w=async()=>{b(!0),j("");try{const t=await fetch("https://prices.runescape.wiki/api/v1/osrs/latest",{headers:{"User-Agent":"OSRS Alchemy Calculator - claude.ai artifact"}});if(!t.ok)throw new Error(`API returned ${t.status}`);const r=await t.json();r.data&&r.data[561]&&r.data[561].high&&C(r.data[561].high);const n=r.data?.["561"]?.high||N,m=d.map(s=>{const u=r.data?.[s.id]?.high||0,P=u>0?s.highAlch-u-n:0,L=P*s.limit;return{...s,buyPrice:u,profit:P,profitPerLimit:L}});p(m)}catch(t){console.error("Error fetching prices:",t),j("Unable to fetch live prices. This may be due to CORS restrictions in the preview environment. The webapp will work when deployed to GitHub Pages.");const r=d.map(n=>({...n,buyPrice:0,profit:0,profitPerLimit:0}));p(r)}finally{b(!1)}};c.useEffect(()=>{const t=d.map(r=>({...r,buyPrice:0,profit:0,profitPerLimit:0}));p(t),w()},[]);const a=t=>{let r="asc";i.key===t&&i.direction==="asc"&&(r="desc"),k({key:t,direction:r})},A=R.useMemo(()=>[...g.filter(n=>x||!n.members)].sort((n,m)=>{const s=n[i.key],l=m[i.key];return typeof s=="string"&&typeof l=="string"?i.direction==="asc"?s.localeCompare(l):l.localeCompare(s):typeof s=="number"&&typeof l=="number"?i.direction==="asc"?s-l:l-s:0}),[g,i,x]),o=t=>i.key!==t?" ↕":i.direction==="asc"?" ↑":" ↓",h=t=>t.toLocaleString();return e.jsx("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"OSRS High Alchemy Profit Calculator"}),e.jsxs("div",{className:"mb-4 flex gap-4 items-center justify-center flex-wrap",children:[e.jsx("button",{onClick:w,disabled:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded font-semibold transition",children:f?"Loading...":"Refresh Prices"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:t=>v(t.target.checked),className:"w-5 h-5"}),e.jsx("span",{children:"Show Members Items"})]}),e.jsxs("div",{className:"text-sm",children:["Nature Rune Price: ",e.jsxs("span",{className:"font-bold text-yellow-400",children:[N," gp"]})]})]}),y&&e.jsxs("div",{className:"mb-4 p-4 bg-yellow-900 border border-yellow-600 rounded text-yellow-100",children:[e.jsx("strong",{children:"Note:"})," ",y]}),e.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-lg shadow-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-700",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-3 text-left cursor-pointer hover:bg-gray-600",onClick:()=>a("name"),children:["Item",o("name")]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-gray-600",onClick:()=>a("highAlch"),children:["High Alch",o("highAlch")]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-gray-600",onClick:()=>a("buyPrice"),children:["Buy Price",o("buyPrice")]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-gray-600",onClick:()=>a("limit"),children:["Limit",o("limit")]}),e.jsxs("th",{className:"px-4 py-3 text-center cursor-pointer hover:bg-gray-600",onClick:()=>a("members"),children:["Members",o("members")]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-gray-600",onClick:()=>a("profit"),children:["Profit",o("profit")]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:bg-gray-600",onClick:()=>a("profitPerLimit"),children:["Profit/Limit",o("profitPerLimit")]})]})}),e.jsx("tbody",{children:A.map((t,r)=>e.jsxs("tr",{className:`border-t border-gray-700 ${r%2===0?"bg-gray-800":"bg-gray-750"} hover:bg-gray-700`,children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx("a",{href:`https://prices.runescape.wiki/osrs/item/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:t.name})}),e.jsx("td",{className:"px-4 py-2 text-right text-yellow-300",children:h(t.highAlch)}),e.jsx("td",{className:"px-4 py-2 text-right",children:t.buyPrice?h(t.buyPrice):"N/A"}),e.jsx("td",{className:"px-4 py-2 text-right",children:h(t.limit)}),e.jsx("td",{className:"px-4 py-2 text-center",children:t.members?"✓":"✗"}),e.jsx("td",{className:`px-4 py-2 text-right font-bold ${t.profit>0?"text-green-400":"text-red-400"}`,children:t.buyPrice?h(t.profit):"N/A"}),e.jsx("td",{className:`px-4 py-2 text-right font-bold ${t.profitPerLimit>0?"text-green-400":"text-red-400"}`,children:t.buyPrice?h(t.profitPerLimit):"N/A"})]},t.id))})]})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-400",children:[e.jsxs("p",{children:["Prices fetched from ",e.jsx("a",{href:"https://prices.runescape.wiki",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"prices.runescape.wiki"})]}),e.jsx("p",{children:"Click column headers to sort. Click item names to view price history."})]})]})})},$=I(E);export{$ as default};
